(this["webpackJsonpgoit-react-hw-04-movies"]=this["webpackJsonpgoit-react-hw-04-movies"]||[]).push([[3],{55:function(e,t,n){"use strict";var a="https://api.themoviedb.org",c="1cb71a91c76c2b28054ba391acc5b661";t.a={fetchShowMoviesDetails:function(e){return fetch("".concat(a,"/3/movie/").concat(e,"?api_key=").concat(c,"&language=en-US")).then((function(e){return e.json()}))},fetchMovieWithQuery:function(e){return fetch("".concat(a,"/3/search/movie?api_key=").concat(c,"&query=").concat(e,"&language=en-US&page=1&include_adult=false")).then((function(e){return e.json()}))},fetchtTrendingMovie:function(){return fetch("".concat(a,"/3/trending/movie/day?api_key=").concat(c)).then((function(e){return e.json()}))},fetchtCastMovie:function(e){return fetch("".concat(a,"/3/movie/").concat(e,"/credits?api_key=").concat(c,"&language=en-US")).then((function(e){return e.json()}))},fetchtReviewsMovie:function(e){return fetch("".concat(a,"/3/movie/").concat(e,"/reviews?api_key=").concat(c,"&language=en-US&page=1")).then((function(e){return e.json()}))}}},75:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return d}));var a=n(51),c=n(52),r=n(54),o=n(53),i=n(15),s=n.n(i),u=n(0),h=n(8),l=n(55),p=n(58),f=n(1),v=function(e){Object(r.a)(n,e);var t=Object(o.a)(n);function n(){var e;Object(a.a)(this,n);for(var c=arguments.length,r=new Array(c),o=0;o<c;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={value:""},e.handleNameChange=function(t){e.setState({value:t.currentTarget.value.toLowerCase()})},e.hanleSubmit=function(t){if(t.preventDefault(),""===e.state.value.trim())return p.b.warning("\u041f\u043e\u043b\u0435 \u043f\u043e\u0448\u0443\u043a\u0443 \u043f\u0443\u0441\u0442\u0435!");e.props.onSubmit(e.state.value),e.setState({value:""})},e}return Object(c.a)(n,[{key:"render",value:function(){return Object(f.jsxs)("form",{className:"SearchForm",onSubmit:this.hanleSubmit,children:[Object(f.jsx)("input",{className:"SearchForm-input",type:"text",placeholder:"Search movie",onChange:this.handleNameChange}),Object(f.jsx)("button",{type:"submit",className:"SearchForm-button",children:"Search"})]})}}]),n}(u.Component),m=(n(59),n(60)),j=n.n(m);function b(e){return j.a.parse(e)}var d=function(e){Object(r.a)(n,e);var t=Object(o.a)(n);function n(){var e;Object(a.a)(this,n);for(var c=arguments.length,r=new Array(c),o=0;o<c;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={movies:[],searchMovie:"",status:"idle",error:"not found"},e.fetchMovies=function(t){e.setState({status:"pending"}),l.a.fetchMovieWithQuery(t).then((function(n){if(0===n.total_pages)return e.setState({movies:[],status:"reject"}),Promise.reject(new Error("This ".concat(t," not found")));e.setState({movies:n.results,status:"resolved"})})).catch((function(t){return e.setState({error:t,status:"rejected"})}))},e.handleChangeQuery=function(t){e.props.history.push({pathname:e.props.location.pathname,search:"query=".concat(t)})},e}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=b(this.props.location.search).query;e?this.fetchMovies(e):this.fetchMovies("batman")}},{key:"componentDidUpdate",value:function(e,t){var n=b(e.location.search).query,a=b(this.props.location.search).query;n!==a&&this.fetchMovies(a)}},{key:"render",value:function(){var e=this,t=this.state,n=t.movies,a=t.status,c=t.error,r=this.props.match;return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(v,{onSubmit:this.handleChangeQuery}),Object(f.jsx)(p.a,{autoClose:3e3,position:"top-center"}),Object(f.jsx)("ul",{children:n.map((function(t){return Object(f.jsx)("li",{children:Object(f.jsx)(h.b,{to:{pathname:"".concat(r.url,"/").concat(t.id),state:{from:e.props.location}},children:t.title})},t.id)}))}),"rejected"===a&&Object(f.jsx)("p",{children:c.message}),"pending"===a&&Object(f.jsx)(s.a,{type:"Circles",color:"#00BFFF",height:100,width:100})]})}}]),n}(u.Component)}}]);
//# sourceMappingURL=movies-page.bd880a54.chunk.js.map